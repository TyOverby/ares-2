#test local assignment
(fn() {var x = 5; x = 10; print(x); x})()
#emit
CreateClosure(0)
Jump(13)
IntLit(5)
Assign(0)
IntLit(10)
DupTop
Assign(0)
Dup(0)
GetGlobal(Symbol(8))
Execute(1)
Pop
Dup(0)
Ret
Execute(0)
#bind
FN-CALL:
    RECEIVER:
        LAMBDA:
            NUM-ARGS:
                0
            NUM-UPVARS:
                0
            NUM-DECLARATIONS:
                1
            ARGS:
            BODY:
                BLOCK-EXPRESSION:
                    DEFINE:
                        NAME:
                            x
                        SOURCE:
                            LOCAL-DEFINE:
                                0
                        VALUE:
                            LITERAL:
                                5
                    ASSIGN:
                        NAME:
                            x
                        SOURCE:
                            LOCAL-DEFINE:
                                0
                        VALUE:
                        LITERAL:
                            10
                    FN-CALL:
                        RECEIVER:
                            SYMBOL:
                                NAME:
                                    print
                                SOURCE:
                                    GLOBAL:
                                        print
                        ARGS:
                            SYMBOL:
                                NAME:
                                    x
                                SOURCE:
                                    LOCAL-DEFINE:
                                        0
                    SYMBOL:
                        NAME:
                            x
                        SOURCE:
                            LOCAL-DEFINE:
                                0
            BINDINGS:
                BINDING:
                    SYMBOL:
                        s10
                    SOURCE:
                        LOCAL-DEFINE:
                            0
    ARGS:
#output
10
#result
10

#test assignment to argument
(fn(a){ a = 10; a })(5)
#bind
FN-CALL:
    RECEIVER:
        LAMBDA:
            NUM-ARGS:
                1
            NUM-UPVARS:
                0
            NUM-DECLARATIONS:
                0
            ARGS:
                a
            BODY:
                BLOCK-EXPRESSION:
                    ASSIGN:
                        NAME:
                            a
                        SOURCE:
                            ARG:
                                0
                        VALUE:
                        LITERAL:
                            10
                    SYMBOL:
                        NAME:
                            a
                        SOURCE:
                            ARG:
                                0
            BINDINGS:
                BINDING:
                    SYMBOL:
                        a
                    SOURCE:
                        ARG:
                            0
    ARGS:
        LITERAL:
            5
#result
10
